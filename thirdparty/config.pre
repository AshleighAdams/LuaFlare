PREFIX = $(DESTDIR)%PREFIX
LUA = %LUA
LUA_DEPENDS = %LUA_DEPENDS

# tools
PRECMD ?= %precmd

CP = %cp --remove-destination
_CP = $(PRECMD) $(CP)
MKDIR = %mkdir -p
_MKDIR = $(PRECMD) $(MKDIR)
CAT = %cat
_CAT = $(PRECMD) $(CAT)
SED = %sed
_SED = $(PRECMD) $(SED)
LN = %ln -sf
_LN = $(PRECMD) $(LN)
GIT = %git
_GIT = $(PRECMD) $(GIT)
CHMOD = %chmod
_CHMOD = $(PRECMD) $(CHMOD)
CHOWN = %chown
_CHOWN = $(PRECMD) $(CHOWN)
SYSTEMCTL = %systemctl
_SYSTEMCTL = $(PRECMD) $(SYSTEMCTL)
UPDATE_RC_D = %updatercd
_UPDATE_RC_D = $(PRECMD) $(UPDATE_RC_D)
SERVICE = %service
_SERVICE = $(PRECMD) $(SERVICE)
INSTALL = %install -D
_INSTALL = $(PRECMD) $(INSTALL)
TOUCH = %touch
_TOUCH = $(PRECMD) $(TOUCH)

USER                    = %USER
SERVICE_SYSTEM          = %SERVICE
NGINX_SITE_HTTP_PORT    = %NGINX_HTTP_PORT
NGINX_SITE_HTTPS_PORT   = %NGINX_HTTPS_PORT

LUAFLARE_PORT          = %LUAFLARE_PORT
LUAFLARE_POSTINT_OPTS  = %LUAFLARE_POSTINT_OPTS
LUAFLARE_LIB_DIR       = $(DESTDIR)%LUAFLARE_LIB_DIR
LUAFLARE_BIN_DIR       = $(DESTDIR)%LUAFLARE_BIN_DIR
LUAFLARE_CFG_DIR       = $(DESTDIR)%LUAFLARE_CFG_DIR
LUAFLARE_LIB_DIR_STR   = %LUAFLARE_LIB_DIR
LUAFLARE_BIN_DIR_STR   = %LUAFLARE_BIN_DIR
LUAFLARE_CFG_DIR_STR   = %LUAFLARE_CFG_DIR
NGINX_DIR              = $(DESTDIR)%NGINX_DIR
NGINX_DIR_STR          = $(subst $(DESTDIR),,$(NGINX_DIR))
BASH_COMPLETION_DIR    = $(DESTDIR)%BASH_COMPLETION_DIR
SYSTEMD_UNIT_DIR       = $(DESTDIR)%SYSTEMD_UNIT_DIR
SYSVINIT_DAEMON_DIR    = $(DESTDIR)%SYSVINIT_DAEMON_DIR
UPSTART_DAEMON_DIR     = $(DESTDIR)%UPSTART_DAEMON_DIR

# auto
GIT_VERSION       =`$(GIT) describe --tags --always`
CONFIGURE_VERSION = %CONFIGURE_VERSION
VERSION           = %VERSION

install-extra: %INSTALL_EXTRA
